<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" type="text/css" href="script-detail-view.css" />

        <script type="text/montage-serialization">
        {
            "owner": {
                "properties": {
                    "element": {"#": "scriptDetail"},

                    "scriptCode": {"@": "codeText"},
                    "emptyDetail": {"#": "emptyDetail"},
                    "scriptNameField": {"@": "nameText"},
                    "scriptTags": {"@": "tagsText"},
                    "saveButton": {"@": "saveButton"},
                    "pauseRecordButton": {"@": "pauseRecordButton"},
                    "recordButton": {"@": "recordButton"},
                    "runButton": {"@": "runButton"},
                    "scriptVariablesPrompt": {"@": "scriptVariablesPrompt"},
                    "variablesButton": {"@": "variablesButton"},
                    "variablesDialog": {"@": "variablesDialog"},
                    "deleteButton": {"@": "deleteButton"},
                    "downloadButton": {"@": "downloadButton"},
                    "urlPrompt": {"@": "urlPrompt"}
                }
            },

            "nameText": {
                "prototype": "matte/ui/input-text.reel",
                "properties": {
                    "element": {"#": "name"}
                },
                "bindings": {
                    "value": {"<-": "@owner.scriptSource.name"}
                }
            },
            "tagsText": {
                "prototype": "matte/ui/input-text.reel",
                "properties": {
                    "element": {"#": "tags"}
                },
                "bindings": {
                    "value": {"<-": "@owner.scriptSource.displayTags"}
                }
            },
            "codeText": {
                "prototype": "matte/ui/input-text.reel",
                "properties": {
                    "element": {"#": "code"}
                },
                "bindings": {
                    "value": {"<-": "@owner.scriptSource.code"},
                    "classList.has('mon-hidden')": {"<-": "!@owner.scriptSource"}
                }
            },
            "downloadButtonListener": {
                "prototype": "montage/core/event/action-event-listener",
                "properties": {
                    "handler": {"@": "owner"},
                    "action": "downloadScriptSource"
                }
            },
            "downloadButton": {
                "prototype": "digit/ui/button.reel",
                "properties": {
                    "element": {"#": "download"}
                },
                "listeners": [
                    {
                        "type": "action",
                        "listener": {"@": "downloadButtonListener"},
                        "capture": false
                    }
                ],
                "bindings": {
                    "classList.has('mon-hidden')": {"<-": "!@owner.scriptSource"}
                }
            },
            "runButtonListener": {
                "prototype": "montage/core/event/action-event-listener",
                "properties": {
                    "handler": {"@": "owner"},
                    "action": "runScriptSource"
                }
            },
            "runButton": {
                "prototype": "digit/ui/button.reel",
                "properties": {
                    "element": {"#": "run"}
                },
                "listeners": [
                    {
                        "type": "action",
                        "listener": {"@": "runButtonListener"},
                        "capture": false
                    }
                ],
                "bindings": {
                    "classList.has('mon-hidden')": {"<-": "!@owner.scriptSource"}
                }
            },
            "scriptVariablesPrompt": {
                "prototype": "./script-variables-prompt.reel",
                "bindings": {
                    "scriptSource": {"<-": "@owner.scriptSource"}
                }
            },
            "variablesButtonListener": {
                "prototype": "montage/core/event/action-event-listener",
                "properties": {
                    "handler": {"@": "owner"},
                    "action": "manageVariables"
                }
            },
            "variablesButton": {
                "prototype": "digit/ui/button.reel",
                "properties": {
                    "element": {"#": "manageVariables"}
                },
                "listeners": [
                    {
                        "type": "action",
                        "listener": {"@": "variablesButtonListener"},
                        "capture": "false"
                    }
                ],
                "bindings": {
                    "classList.has('mon-hidden')": {"<-": "!@owner.scriptSource"}
                }
            },
            "variablesDialog": {
                "prototype": "./variables-dialog.reel",
                "bindings": {
                    "script": {"<-": "@owner.scriptSource"}
                }
            },
            "deleteButtonListener": {
                "prototype": "montage/core/event/action-event-listener",
                "properties": {
                    "handler": {"@": "owner"},
                    "action": "deleteScriptSource"
                }
            },
            "deleteButton": {
                "prototype": "digit/ui/button.reel",
                "properties": {
                    "element": {"#": "delete"}
                },
                "listeners": [
                    {
                        "type": "action",
                        "listener": {"@": "deleteButtonListener"},
                        "capture": false
                    }
                ],
                "bindings": {
                    "classList.has('mon-hidden')": {"<-": "!@owner.scriptSource"}
                }
            },
            "saveButtonListener": {
                "prototype": "montage/core/event/action-event-listener",
                "properties": {
                    "handler": {"@": "owner"},
                    "action": "saveScriptSource"
                }
            },
            "saveButton": {
                "prototype": "digit/ui/button.reel",
                "properties": {
                    "element": {"#": "save"}
                },
                "listeners": [
                    {
                        "type": "action",
                        "listener": {"@": "saveButtonListener"},
                        "capture": false
                    }
                ],
                "bindings": {
                    "classList.has('mon-hidden')": {"<-": "!@owner.scriptSource"}
                }
            },
            "recordButtonListener": {
                "prototype": "montage/core/event/action-event-listener",
                "properties": {
                    "handler": {"@": "owner"},
                    "action": "recordScript"
                }
            },
            "recordButton": {
                "prototype": "digit/ui/button.reel",
                "properties": {
                    "element": {"#": "record"}
                },
                "listeners": [
                    {
                        "type": "action",
                        "listener": {"@": "recordButtonListener"},
                        "capture": false
                    }
                ],
                "bindings": {
                    "classList.has('mon-hidden')": {"<-": "!@owner.scriptSource"}
                }
            },
            "pauseRecordButtonListener": {
                "prototype": "montage/core/event/action-event-listener",
                "properties": {
                    "handler": {"@": "owner"},
                    "action": "pauseRecordScript"
                }
            },
            "pauseRecordButton": {
                "prototype": "digit/ui/button.reel",
                "properties": {
                    "element": {"#": "pauseRecord"}
                },
                "listeners": [
                    {
                        "type": "action",
                        "listener": {"@": "pauseRecordButtonListener"},
                        "capture": false
                    }
                ],
                "bindings": {
                    "classList.has('mon-hidden')": {"<-": "!@owner.scriptSource"}
                }
            },

            "urlPrompt": {
                "prototype": "ui/text-prompt.reel",
                "properties": {
                    "element": {"#": "urlPrompt"},
                    "msg": "Enter application URL:",
                    "value": "/screening/samples/sample.html"
                }
            }
        }
        </script>
    </head>
    <body>
        <!-- One line summary of a test script -->
        <div data-montage-id="scriptDetail" class="ScriptDetail">
            <div class="codeHeader">
                <label for="name">Name</label>
                <input type="text" data-montage-id="name" class="name">
                <label for="tags">Tags</label>
                <input type="text" data-montage-id="tags" class="tags" placeholder="Space separated. Use &quot; &quot; for tag with multiple words.">
            </div>
            <div class="toolBar">
                <div class="buttonToggle">
                    <button data-montage-id="pauseRecord" class="red" style="display: none;">Pause Recording</button>
                    <button data-montage-id="record" class="red">Record</button>
                </div>
                <div class="buttonGroup">
                    <button data-montage-id="run" class="green">Run</button>
                </div>
                <div class="buttonGroup">
                    <button data-montage-id="manageVariables">Manage Script Variables</button>
                </div>
                <div class="buttonGroup">
                    <button data-montage-id="save">Save</button>
                    <button data-montage-id="delete">Delete</button>
                    <button data-montage-id="download">Download</button>
                </div>
                <div class="buttonGroup spacer"></div>
            </div>
            <textarea type="text" data-montage-id="code" class="code"></textarea>
            <div data-montage-id="emptyDetail" class="emptyDetail centeredContent flexFill">
                <div class="centeredWrapper">
                    <p>
                        No script selected.<br/><br/>
                        Please select a script from the list on the left<br/>
                        or click "New" to begin editing.
                    </p>
                </div>
            </div>
            <div data-montage-id="urlPrompt" style="display: none; margin: auto;"></div>
        </div>
    </body>
</html>